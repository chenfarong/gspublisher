{"version":3,"sources":["Game.js"],"names":["XGame","cc","Class","extends","Component","statics","username","password","accid","aid","token","host","sdtime","whereUrl","Where","callback","who","n","url","req","cmd","ver","realm","xhr","loader","getXMLHttpRequest","onreadystatechange","readyState","status","responseText","open","timeout","ontimeout","console","error","send","JSON","stringify","Update","dt"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAIA,QAAQC,GAAGC,KAAH,CAAS;AACnBC,WAASF,GAAGG,SADO;AAEnBC,WAAS;AACPC,cAAU,EADH;AAEPC,cAAU,EAFH;AAGPC,WAAO,EAHA,EAGI;AACXC,SAAK,EAJE,EAIE;AACTC,WAAO,EALA,EAKI;AACXC,UAAM,EANC,EAMG;AACVC,YAAQ,CAPD,EAOI;;AAEXC,cAAU,CACR,iCADQ,EAER,iCAFQ,EAGR,iCAHQ,CATH;;AAePC,WAAO,eAASC,QAAT,EAAmBC,GAAnB,EAAwBC,CAAxB,EAA2B;AAChCA,UAAIA,IAAI,CAAR;AACA,UAAIC,MAAM,iCAAV,CAFgC,CAEa;;AAE7C;AACA,UAAIC,MAAM,EAAV;AACAA,UAAIC,GAAJ,GAAU,UAAV;AACAD,UAAIE,GAAJ,GAAU,MAAV;AACAF,UAAIG,KAAJ,GAAY,SAAZ;AACA;AACA,UAAIC,MAAMtB,GAAGuB,MAAH,CAAUC,iBAAV,EAAV;AACAF,UAAIG,kBAAJ,GAAyB,YAAW;AAClC,YAAIH,IAAII,UAAJ,KAAmB,CAAvB,EAA0B;AACxB;AACA,cAAIJ,IAAIK,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAb,qBAASC,GAAT,EAAcO,IAAIM,YAAlB;AACD,WAHD,MAGO;AACLd,qBAASC,GAAT,EAAc,IAAd;AACD;AACF;AACF,OAVD;AAWAO,UAAIO,IAAJ,CAAS,MAAT,EAAiBZ,GAAjB;AACAK,UAAIQ,OAAJ,GAAc,IAAd,CAvBgC,CAuBZ;AACpBR,UAAIS,SAAJ,GAAgB,YAAM;AACpBC,gBAAQC,KAAR,CAAc,WAAd;AACAnB,iBAASC,GAAT,EAAc,IAAd;AACD,OAHD;;AAKAO,UAAIY,IAAJ,CAASC,KAAKC,SAAL,CAAelB,GAAf,CAAT;AACD,KA7CM;;AA+CP;AACA;AACAmB,YAAQ,gBAASC,EAAT,EAAa,CAAE;AAjDhB;AAFU,CAAT,CAAZ;;QAuDSvC,QAAAA","file":"Game.js","sourceRoot":"../../../../assets/Script","sourcesContent":["//import { XNet } from \"./Network\";\n\nvar XGame = cc.Class({\n  extends: cc.Component,\n  statics: {\n    username: \"\",\n    password: \"\",\n    accid: \"\", //账号\n    aid: \"\", //角色编号\n    token: \"\", //令牌\n    host: \"\", //游戏服务位置\n    sdtime: 0, //和服务器之间的时间差 毫秒\n\n    whereUrl: [\n      \"http://where.9966886699.com/xx/\",\n      \"http://where.9966886699.com/xx/\",\n      \"http://where.9966886699.com/xx/\"\n    ],\n\n    Where: function(callback, who, n) {\n      n = n % 3;\n      let url = \"http://where.9966886699.com/xx/\"; //this.whereUrl[n];\n\n      //从位置中心查询游戏服务器位置 http post 获得\n      let req = {};\n      req.cmd = \"GX_WHERE\";\n      req.ver = \"1000\";\n      req.realm = \"android\";\n      //XNet.HttpPost(\"http://where.9966886699.com/xx/\", req);\n      var xhr = cc.loader.getXMLHttpRequest();\n      xhr.onreadystatechange = function() {\n        if (xhr.readyState === 4) {\n          //console.log(\"recv:\" + xhr.responseText);\n          if (xhr.status === 200) {\n            //收到内容后处理\n            callback(who, xhr.responseText);\n          } else {\n            callback(who, null);\n          }\n        }\n      };\n      xhr.open(\"POST\", url);\n      xhr.timeout = 5000; //5 seconds for timeout\n      xhr.ontimeout = () => {\n        console.error(\"Timeout!!\");\n        callback(who, null);\n      };\n\n      xhr.send(JSON.stringify(req));\n    },\n\n    //这里实现逻辑帧\n    //dt 上一帧到本帧时间差\n    Update: function(dt) {}\n  }\n});\n\nexport { XGame };\n"]}