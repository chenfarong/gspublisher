{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Config.js"],"names":["module","exports","properties","LoadFromFile","fname","callback","arg","cc","loader","loadRes","err","jsonAsset","Data","json","_onAfterLoaded","bind","Array","isArray","FeildName","Loaded","RowObject","index","length","res","Object","o","i","toString","FindObject","result","kname","kvalue","n","j","Count","push","FindObjectIndexOf","indexOf","FeildIndex","RowFeildValueFirst","idx","r","Current","RowFeildValue","Select","RowFeildValueFirstEx","ksecond","jx"],"mappings":"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","file":"Config.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["module.exports = {\r\n  /*  \r\n    FeildName = new Array(),\r\n    ConfigName = \"\",\r\n    Loaded = false,\r\n    Data = new Array(),\r\n*/\r\n  properties: {\r\n    //Rows: new Map()\r\n  },\r\n\r\n  LoadFromFile(fname, callback, arg) {\r\n    cc.loader.loadRes(\r\n      fname,\r\n      function(err, jsonAsset) {\r\n        this.Data = jsonAsset.json;\r\n        //console.log(JSON.stringify(jsonAsset.json));\r\n        this._onAfterLoaded();\r\n        if (callback) callback(arg);\r\n      }.bind(this)\r\n    );\r\n  },\r\n\r\n  _onAfterLoaded() {\r\n    //处理第一行\r\n    if (Array.isArray(this.Data)) {\r\n      this.FeildName = this.Data[0];\r\n      this.Loaded = true;\r\n    }\r\n  },\r\n\r\n  RowObject(index) {\r\n    index = index + 1;\r\n    if (index >= this.Data.length) return null;\r\n    var res = new Object();\r\n    let o = this.Data[index];\r\n    for (let i = 0; i < this.FeildName.length; i++) {\r\n      res[this.FeildName[i].toString()] = o[i];\r\n    }\r\n    return res;\r\n  },\r\n\r\n  //符合条件进入到数组中去\r\n  FindObject(result, kname, kvalue, n = 1) {\r\n    let j = 0;\r\n    for (let i = 0; i < this.Count(); i++) {\r\n      var o = RowObject(i);\r\n      if (o[kname] == kvalue) {\r\n        result.push(o);\r\n        j++;\r\n      }\r\n      if (n > 0 && j >= n) break;\r\n    }\r\n  },\r\n\r\n  //字段中包含的列出来\r\n  FindObjectIndexOf(result, kname, kvalue, n = 1) {\r\n    let j = 0;\r\n    for (let i = 0; i < this.Count(); i++) {\r\n      var o = RowObject(i);\r\n      if (o[kname].indexOf(kvalue) != -1) {\r\n        result.push(o);\r\n        j++;\r\n      }\r\n      if (n > 0 && j >= n) break;\r\n    }\r\n  },\r\n\r\n  Count() {\r\n    if (this.Data.length == 0) return 0;\r\n    return this.Data.length - 1;\r\n  },\r\n\r\n  FeildIndex(kname) {\r\n    if (Array.isArray(this.FeildName)) {\r\n      for (let i = 0; i < this.FeildName.length; i++) {\r\n        if (this.FeildName[i] == kname) {\r\n          return i;\r\n        }\r\n      }\r\n    }\r\n    return -1;\r\n  },\r\n\r\n  ///////////////\r\n  // 下面用途不大\r\n  ///////////////\r\n  RowFeildValueFirst(kname, kvalue) {\r\n    let idx = this.FeildIndex(kname);\r\n    if (idx < 0) return null;\r\n    for (let r = 0; r < this.Data.length; r++) {\r\n      var o = this.Data[r];\r\n      if (o[idx] == kvalue) {\r\n        this.Current = o;\r\n        return o;\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  RowFeildValue(kname, kvalue) {\r\n    this.Select = new Array();\r\n    let idx = this.FeildIndex(kname);\r\n    if (idx < 0) return res;\r\n    for (let r = 0; r < this.Data; r++) {\r\n      var o = this.Data[r];\r\n      if (o[idx] == kvalue) {\r\n        this.Select.push(o);\r\n      }\r\n    }\r\n    return this.Select;\r\n  },\r\n\r\n  RowFeildValueFirstEx(kname, kvalue, ksecond) {\r\n    let idx = this.FeildIndex(kname);\r\n    if (idx < 0) return \"\";\r\n    for (let r = 0; r < this.Data.length; r++) {\r\n      let o = this.Data[r];\r\n      if (o[idx] == kvalue) {\r\n        let jx = this.FeildIndex(ksecond);\r\n        if (jx < 0) return \"\";\r\n        return o[jx];\r\n      }\r\n    }\r\n    return \"\";\r\n  }\r\n};\r\n\r\n//var XConfig = new AConfig();\r\n//export { AConfig };\r\n"]}