{"version":3,"sources":["../../../../assets/Script/assets/Script/Config.js"],"names":["module","exports","properties","LoadFromFile","fname","callback","arg","cc","loader","loadRes","err","jsonAsset","Data","json","_onAfterLoaded","bind","Array","isArray","FeildName","Loaded","RowObject","index","length","res","Object","o","i","toString","Count","FeildIndex","kname","RowFeildValueFirst","kvalue","idx","r","Current","RowFeildValue","Select","push","RowFeildValueFirstEx","ksecond","jx"],"mappings":"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","file":"Config.js","sourceRoot":"../../../../assets/Script","sourcesContent":["module.exports = {\n  /*  \n    FeildName = new Array(),\n    ConfigName = \"\",\n    Loaded = false,\n    Data = new Array(),\n*/\n  properties: {\n    //Rows: new Map()\n  },\n\n  LoadFromFile(fname, callback, arg) {\n    cc.loader.loadRes(\n      fname,\n      function(err, jsonAsset) {\n        this.Data = jsonAsset.json;\n        //console.log(JSON.stringify(jsonAsset.json));\n        this._onAfterLoaded();\n        if (callback) callback(arg);\n      }.bind(this)\n    );\n  },\n\n  _onAfterLoaded() {\n    //处理第一行\n    if (Array.isArray(this.Data)) {\n      this.FeildName = this.Data[0];\n      this.Loaded = true;\n    }\n  },\n\n  RowObject(index) {\n    index = index + 1;\n    if (index >= this.Data.length) return null;\n    var res = new Object();\n    let o = this.Data[index];\n    for (let i = 0; i < this.FeildName.length; i++) {\n      res[this.FeildName[i].toString()] = o[i];\n    }\n    return res;\n  },\n\n  Count() {\n    if (this.Data.length == 0) return 0;\n    return this.Data.length - 1;\n  },\n\n  FeildIndex(kname) {\n    if (Array.isArray(this.FeildName)) {\n      for (let i = 0; i < this.FeildName.length; i++) {\n        if (this.FeildName[i] == kname) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n\n  RowFeildValueFirst(kname, kvalue) {\n    let idx = this.FeildIndex(kname);\n    if (idx < 0) return null;\n    for (let r = 0; r < this.Data.length; r++) {\n      var o = this.Data[r];\n      if (o[idx] == kvalue) {\n        this.Current = o;\n        return o;\n      }\n    }\n    return null;\n  },\n\n  RowFeildValue(kname, kvalue) {\n    this.Select = new Array();\n    let idx = this.FeildIndex(kname);\n    if (idx < 0) return res;\n    for (let r = 0; r < this.Data; r++) {\n      var o = this.Data[r];\n      if (o[idx] == kvalue) {\n        this.Select.push(o);\n      }\n    }\n    return this.Select;\n  },\n\n  RowFeildValueFirstEx(kname, kvalue, ksecond) {\n    let idx = this.FeildIndex(kname);\n    if (idx < 0) return \"\";\n    for (let r = 0; r < this.Data.length; r++) {\n      let o = this.Data[r];\n      if (o[idx] == kvalue) {\n        let jx = this.FeildIndex(ksecond);\n        if (jx < 0) return \"\";\n        return o[jx];\n      }\n    }\n    return \"\";\n  }\n};\n\n//var XConfig = new AConfig();\n//export { AConfig };\n"]}