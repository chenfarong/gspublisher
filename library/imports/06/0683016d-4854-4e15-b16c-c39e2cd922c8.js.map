{"version":3,"sources":["../../../../assets/Script/assets/Script/Config.js"],"names":["module","exports","properties","LoadFromFile","fname","callback","arg","cc","loader","loadRes","err","jsonAsset","Data","json","_onAfterLoaded","bind","Array","isArray","FeildName","Loaded","RowObject","index","length","res","Object","o","i","toString","FindObject","result","kname","kvalue","n","j","Count","push","FindObjectIndexOf","indexOf","FeildIndex","RowFeildValueFirst","idx","r","Current","RowFeildValue","Select","RowFeildValueFirstEx","ksecond","jx"],"mappings":"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","file":"Config.js","sourceRoot":"../../../../assets/Script","sourcesContent":["module.exports = {\n  /*  \n    FeildName = new Array(),\n    ConfigName = \"\",\n    Loaded = false,\n    Data = new Array(),\n*/\n  properties: {\n    //Rows: new Map()\n  },\n\n  LoadFromFile(fname, callback, arg) {\n    cc.loader.loadRes(\n      fname,\n      function(err, jsonAsset) {\n        this.Data = jsonAsset.json;\n        //console.log(JSON.stringify(jsonAsset.json));\n        this._onAfterLoaded();\n        if (callback) callback(arg);\n      }.bind(this)\n    );\n  },\n\n  _onAfterLoaded() {\n    //处理第一行\n    if (Array.isArray(this.Data)) {\n      this.FeildName = this.Data[0];\n      this.Loaded = true;\n    }\n  },\n\n  RowObject(index) {\n    index = index + 1;\n    if (index >= this.Data.length) return null;\n    var res = new Object();\n    let o = this.Data[index];\n    for (let i = 0; i < this.FeildName.length; i++) {\n      res[this.FeildName[i].toString()] = o[i];\n    }\n    return res;\n  },\n\n  //符合条件进入到数组中去\n  FindObject(result, kname, kvalue, n = 1) {\n    let j = 0;\n    for (let i = 0; i < this.Count(); i++) {\n      var o = RowObject(i);\n      if (o[kname] == kvalue) {\n        result.push(o);\n        j++;\n      }\n      if (n > 0 && j >= n) break;\n    }\n  },\n\n  //字段中包含的列出来\n  FindObjectIndexOf(result, kname, kvalue, n = 1) {\n    let j = 0;\n    for (let i = 0; i < this.Count(); i++) {\n      var o = RowObject(i);\n      if (o[kname].indexOf(kvalue) != -1) {\n        result.push(o);\n        j++;\n      }\n      if (n > 0 && j >= n) break;\n    }\n  },\n\n  Count() {\n    if (this.Data.length == 0) return 0;\n    return this.Data.length - 1;\n  },\n\n  FeildIndex(kname) {\n    if (Array.isArray(this.FeildName)) {\n      for (let i = 0; i < this.FeildName.length; i++) {\n        if (this.FeildName[i] == kname) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n\n  ///////////////\n  // 下面用途不大\n  ///////////////\n  RowFeildValueFirst(kname, kvalue) {\n    let idx = this.FeildIndex(kname);\n    if (idx < 0) return null;\n    for (let r = 0; r < this.Data.length; r++) {\n      var o = this.Data[r];\n      if (o[idx] == kvalue) {\n        this.Current = o;\n        return o;\n      }\n    }\n    return null;\n  },\n\n  RowFeildValue(kname, kvalue) {\n    this.Select = new Array();\n    let idx = this.FeildIndex(kname);\n    if (idx < 0) return res;\n    for (let r = 0; r < this.Data; r++) {\n      var o = this.Data[r];\n      if (o[idx] == kvalue) {\n        this.Select.push(o);\n      }\n    }\n    return this.Select;\n  },\n\n  RowFeildValueFirstEx(kname, kvalue, ksecond) {\n    let idx = this.FeildIndex(kname);\n    if (idx < 0) return \"\";\n    for (let r = 0; r < this.Data.length; r++) {\n      let o = this.Data[r];\n      if (o[idx] == kvalue) {\n        let jx = this.FeildIndex(ksecond);\n        if (jx < 0) return \"\";\n        return o[jx];\n      }\n    }\n    return \"\";\n  }\n};\n\n//var XConfig = new AConfig();\n//export { AConfig };\n"]}