{"version":3,"sources":["../../../../assets/resources/assets/resources/GMain.js"],"names":["cc","Class","extends","Component","properties","TryTick","Loading","Prefab","createLoading","n","instantiate","sz","director","getWinSize","setPosition","width","height","parent","getScene","name","onLoad","start","XGame","Where","cbWhere","who","response","XNet","dispatchXNet","WhereAfter","v","find","showText","getComponent","Label","string","whereResult","rc","Version","cbUpgrade"],"mappings":";;;;;;AAUA;;AACA;;AAXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,aAAS,CADC;AAEVC,aAASN,GAAGO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBU,GAHL;;AAuBPC,eAvBO,2BAuBS;AACd,QAAIC,IAAIT,GAAGU,WAAH,CAAe,KAAKJ,OAApB,CAAR;AACA,QAAIG,CAAJ,EAAO;AACL;AACA;AACA;AACA;AACA,UAAIE,KAAKX,GAAGY,QAAH,CAAYC,UAAZ,EAAT;AACAJ,QAAEK,WAAF,CAAcH,GAAGI,KAAH,GAAW,CAAzB,EAA4BJ,GAAGK,MAAH,GAAY,CAAxC,EAA2C,CAA3C;AACAP,QAAEQ,MAAF,GAAWjB,GAAGY,QAAH,CAAYM,QAAZ,EAAX;AACAT,QAAEU,IAAF,GAAS,SAAT;AACD;AACF,GAnCM;;AAoCP;;AAEAC,QAtCO,oBAsCE;AACP,SAAKZ,aAAL;AACA;AACA;AACD,GA1CM;AA4CPa,OA5CO,mBA4CC;AACN,SAAKhB,OAAL,GAAe,CAAf;AACAiB,gBAAMC,KAAN,CAAY,KAAKC,OAAjB,EAA0B,IAA1B,EAAgC,KAAKnB,OAArC;AACD,GA/CM;;;AAiDPmB,WAAS,iBAASC,GAAT,EAAcC,QAAd,EAAwB;AAC/B;AACA;AACAD,QAAIpB,OAAJ;AACA;AACA,QAAIqB,YAAY,IAAhB,EAAsB;AACpBJ,kBAAMC,KAAN,CAAYE,IAAID,OAAhB,EAAyBC,IAAIpB,OAA7B;AACD,KAFD,MAEO;AACL;AACAsB,oBAAKC,YAAL,CAAkB,YAAlB,EAAgCF,QAAhC;;AAEAD,UAAII,UAAJ;AACD;AACF,GA9DM;;AAgEPA,cAAY,sBAAW;AACrB,QAAIC,IAAI9B,GAAG+B,IAAH,CAAQ,kBAAR,EAA4B/B,GAAGY,QAAH,CAAYM,QAAZ,EAA5B,CAAR;AACA,QAAIY,KAAK,IAAT,EAAe;AACb,UAAIE,WAAWF,EAAEG,YAAF,CAAejC,GAAGkC,KAAlB,CAAf;AACA,UAAIF,YAAY,IAAhB,EAAsB;AACpBA,iBAASG,MAAT,GAAkB,aAAlB;AACD;AACF;AACD;AACA,QAAIb,YAAMc,WAAN,CAAkBC,EAAlB,IAAwB,CAA5B,EAA+B;AAC7B;AACD,KAFD,MAEO;AACLf,kBAAMgB,OAAN,CAAc,KAAKC,SAAnB,EAA8B,IAA9B;AACD;AACF,GA9EM;;AAgFP;AACAA,aAAW,mBAASd,GAAT,EAAcC,QAAd,EAAwB,CAElC;AADC;;;AAGF;AArFO,CAAT","file":"GMain.js","sourceRoot":"../../../../assets/resources","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport { XGame } from \"./Game\";\nimport { XNet } from \"./Network\";\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    TryTick: 0,\n    Loading: cc.Prefab\n    // foo: {\n    //     // ATTRIBUTES:\n    //     default: null,        // The default value will be used only when the component attaching\n    //                           // to a node for the first time\n    //     type: cc.SpriteFrame, // optional, default is typeof default\n    //     serializable: true,   // optional, default is true\n    // },\n    // bar: {\n    //     get () {\n    //         return this._bar;\n    //     },\n    //     set (value) {\n    //         this._bar = value;\n    //     }\n    // },\n  },\n\n  createLoading() {\n    var n = cc.instantiate(this.Loading);\n    if (n) {\n      // let tipsCtrl = n.getComponent(\"TipsCtrl\");\n      // if (content && tipsCtrl) {\n      //   tipsCtrl.setContent(content);\n      // }\n      let sz = cc.director.getWinSize();\n      n.setPosition(sz.width / 2, sz.height / 2, 0);\n      n.parent = cc.director.getScene();\n      n.name = \"loading\";\n    }\n  },\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    this.createLoading();\n    //var loading = cc.instantiate(Loading);\n    //cc.director.getScene().addChild(loading);\n  },\n\n  start() {\n    this.TryTick = 1;\n    XGame.Where(this.cbWhere, this, this.TryTick);\n  },\n\n  cbWhere: function(who, response) {\n    //    console.log(response);\n    //    console.log(typeof who);\n    who.TryTick++;\n    //    console.log(who.TryTick);\n    if (response == null) {\n      XGame.Where(who.cbWhere, who.TryTick);\n    } else {\n      //进行热更新判断\n      XNet.dispatchXNet(\"GX_WHERE_R\", response);\n\n      who.WhereAfter();\n    }\n  },\n\n  WhereAfter: function() {\n    let v = cc.find(\"loading/ShowText\", cc.director.getScene());\n    if (v != null) {\n      let showText = v.getComponent(cc.Label);\n      if (showText != null) {\n        showText.string = \"成功获取游戏服务器位置\";\n      }\n    }\n    //console.log(\"222\", JSON.stringify(XGame.whereResult));\n    if (XGame.whereResult.rc != 0) {\n      //中部一直显示文本内容\n    } else {\n      XGame.Version(this.cbUpgrade, this);\n    }\n  },\n\n  //\n  cbUpgrade: function(who, response) {\n    //如果返回要求升级JS代码部分\n  }\n\n  // update (dt) {},\n});\n"]}