{"version":3,"sources":["..\\..\\..\\..\\assets\\resources/assets\\resources\\GMain.js"],"names":["cc","Class","extends","Component","properties","TryTick","Loading","Prefab","createLoading","n","instantiate","sz","director","getWinSize","setPosition","width","height","parent","getScene","name","onLoad","start","XGame","Where","cbWhere","who","response","XNet","dispatchXNet","WhereAfter","v","find","showText","getComponent","Label","string","cbUpgrade"],"mappings":";;;;;;AAUA;;AACA;;AAXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKAA,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,aAAS,CADC;AAEVC,aAASN,GAAGO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBU,GAHL;;AAuBPC,eAvBO,2BAuBS;AACd,QAAIC,IAAIT,GAAGU,WAAH,CAAe,KAAKJ,OAApB,CAAR;AACA,QAAIG,CAAJ,EAAO;AACL;AACA;AACA;AACA;AACA,UAAIE,KAAKX,GAAGY,QAAH,CAAYC,UAAZ,EAAT;AACAJ,QAAEK,WAAF,CAAcH,GAAGI,KAAH,GAAW,CAAzB,EAA4BJ,GAAGK,MAAH,GAAY,CAAxC,EAA2C,CAA3C;AACAP,QAAEQ,MAAF,GAAWjB,GAAGY,QAAH,CAAYM,QAAZ,EAAX;AACAT,QAAEU,IAAF,GAAS,SAAT;AACD;AACF,GAnCM;;AAoCP;;AAEAC,QAtCO,oBAsCE;AACP,SAAKZ,aAAL;AACA;AACA;AACD,GA1CM;AA4CPa,OA5CO,mBA4CC;AACN,SAAKhB,OAAL,GAAe,CAAf;AACAiB,gBAAMC,KAAN,CAAY,KAAKC,OAAjB,EAA0B,IAA1B,EAAgC,KAAKnB,OAArC;AACD,GA/CM;;;AAiDPmB,WAAS,iBAASC,GAAT,EAAcC,QAAd,EAAwB;AAC/B;AACA;AACAD,QAAIpB,OAAJ;AACA;AACA,QAAIqB,YAAY,IAAhB,EAAsB;AACpBJ,kBAAMC,KAAN,CAAYE,IAAID,OAAhB,EAAyBC,IAAIpB,OAA7B;AACD,KAFD,MAEO;AACL;AACAsB,oBAAKC,YAAL,CAAkB,YAAlB,EAAgCF,QAAhC;;AAEAD,UAAII,UAAJ;AACD;AACF,GA9DM;;AAgEPA,cAAY,sBAAW;AACrB,QAAIC,IAAI9B,GAAG+B,IAAH,CAAQ,kBAAR,EAA4B/B,GAAGY,QAAH,CAAYM,QAAZ,EAA5B,CAAR;AACA,QAAIY,KAAK,IAAT,EAAe;AACb,UAAIE,WAAWF,EAAEG,YAAF,CAAejC,GAAGkC,KAAlB,CAAf;AACA,UAAIF,YAAY,IAAhB,EAAsB;AACpBA,iBAASG,MAAT,GAAkB,aAAlB;AACD;AACF;AACF,GAxEM;;AA0EP;AACAC,aAAW,mBAASX,GAAT,EAAcC,QAAd,EAAwB,CAAE;;AAErC;AA7EO,CAAT","file":"GMain.js","sourceRoot":"..\\..\\..\\..\\assets\\resources","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { XGame } from \"./Game\";\r\nimport { XNet } from \"./Network\";\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    TryTick: 0,\r\n    Loading: cc.Prefab\r\n    // foo: {\r\n    //     // ATTRIBUTES:\r\n    //     default: null,        // The default value will be used only when the component attaching\r\n    //                           // to a node for the first time\r\n    //     type: cc.SpriteFrame, // optional, default is typeof default\r\n    //     serializable: true,   // optional, default is true\r\n    // },\r\n    // bar: {\r\n    //     get () {\r\n    //         return this._bar;\r\n    //     },\r\n    //     set (value) {\r\n    //         this._bar = value;\r\n    //     }\r\n    // },\r\n  },\r\n\r\n  createLoading() {\r\n    var n = cc.instantiate(this.Loading);\r\n    if (n) {\r\n      // let tipsCtrl = n.getComponent(\"TipsCtrl\");\r\n      // if (content && tipsCtrl) {\r\n      //   tipsCtrl.setContent(content);\r\n      // }\r\n      let sz = cc.director.getWinSize();\r\n      n.setPosition(sz.width / 2, sz.height / 2, 0);\r\n      n.parent = cc.director.getScene();\r\n      n.name = \"loading\";\r\n    }\r\n  },\r\n  // LIFE-CYCLE CALLBACKS:\r\n\r\n  onLoad() {\r\n    this.createLoading();\r\n    //var loading = cc.instantiate(Loading);\r\n    //cc.director.getScene().addChild(loading);\r\n  },\r\n\r\n  start() {\r\n    this.TryTick = 1;\r\n    XGame.Where(this.cbWhere, this, this.TryTick);\r\n  },\r\n\r\n  cbWhere: function(who, response) {\r\n    //    console.log(response);\r\n    //    console.log(typeof who);\r\n    who.TryTick++;\r\n    //    console.log(who.TryTick);\r\n    if (response == null) {\r\n      XGame.Where(who.cbWhere, who.TryTick);\r\n    } else {\r\n      //进行热更新判断\r\n      XNet.dispatchXNet(\"GX_WHERE_R\", response);\r\n\r\n      who.WhereAfter();\r\n    }\r\n  },\r\n\r\n  WhereAfter: function() {\r\n    let v = cc.find(\"loading/ShowText\", cc.director.getScene());\r\n    if (v != null) {\r\n      let showText = v.getComponent(cc.Label);\r\n      if (showText != null) {\r\n        showText.string = \"成功获取游戏服务器位置\";\r\n      }\r\n    }\r\n  },\r\n\r\n  //\r\n  cbUpgrade: function(who, response) {}\r\n\r\n  // update (dt) {},\r\n});\r\n"]}